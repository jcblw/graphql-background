(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{83:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return u}));var i=n(3),r=n(7),c=(n(0),n(91)),a={id:"client-ref",title:"Client"},o={unversionedId:"client-ref",id:"client-ref",isDocsHomePage:!1,title:"Client",description:"Overview",source:"@site/docs/client-ref.md",sourceDirName:".",slug:"/client-ref",permalink:"/finch-graphql/docs/client-ref",editUrl:"https://github.com/jointoucan/finch-graphql/edit/master/packages/finch-docs/docs/client-ref.md",version:"current",frontMatter:{id:"client-ref",title:"Client"},sidebar:"someSidebar",previous:{title:"Api",permalink:"/finch-graphql/docs/api-ref"},next:{title:"React",permalink:"/finch-graphql/docs/react-ref"}},s=[{value:"Overview",id:"overview",children:[]},{value:"Reference",id:"reference",children:[{value:"FinchClient",id:"finchclient",children:[]},{value:"FinchClient::query",id:"finchclientquery",children:[]},{value:"FinchClient::mutation",id:"finchclientmutation",children:[]},{value:"FinchClient::subscribe",id:"finchclientsubscribe",children:[]}]}],l={toc:s};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(i.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"overview"},"Overview"),Object(c.b)("p",null,"FinchClient is the client class of the Finch framework. It is used to send requests to the API and receive responses. It is also used to create and manage cache of the responses."),Object(c.b)("h2",{id:"reference"},"Reference"),Object(c.b)("h3",{id:"finchclient"},"FinchClient"),Object(c.b)("p",null,"This is the main export of the client package. This is a class that is mostly configured by the constructor options, but this client can also be used as an imperative API for Finch."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-typescript"},"import { FinchClient } from '@finch-graphql/client';\n\nconst client = new FinchClient(options);\n")),Object(c.b)("p",null,"This client is also re-exported by the react package."),Object(c.b)("h4",{id:"parameters"},"Parameters"),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"options")," parameter is an object that can be used to configure the client, this is the only parameter for the FinchClient constructor."),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"options?.id")," is the id of the extension you are trying to communicate with. This is only needed if you are messaging the extension externally."),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"options?.messageKey")," is the key used to send messages to the extension. There is a default key that is used if this is not provided. This should be the same key passed to FinchApi."),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"options.cache")," is an instance of FinchCache. This is used to store cached responses, and be able to sync all identical requests to the same response."),Object(c.b)("h3",{id:"finchclientquery"},"FinchClient::query"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"query")," queries the Api and returns a properly typed response. This also has the side effect of setting cache and updating any queries that subscribe to the cache."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-typescript"},"const response = await client.query(query, variables [, options]);\n")),Object(c.b)("p",null,"The options of the query method are used to make configure the query to hit a different API then the one specified in the constructor, and is not needed in most cases."),Object(c.b)("h3",{id:"finchclientmutation"},"FinchClient::mutation"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"mutation")," queries the Api and returns a properly typed response. This does not update cache like the query method does."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-typescript"},"const response = await client.mutation(query, variables [, options]);\n")),Object(c.b)("p",null,"The options of the mutation method are used to make configure the query to hit a different API then the one specified in the constructor, and is not needed in most cases."),Object(c.b)("h3",{id:"finchclientsubscribe"},"FinchClient::subscribe"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"subscribe")," listens to changes in cache for a given query. It returns a method that unsubscribes the listener."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-typescript"},"const unsubscribe = await client.subscribe(query, variables (updatedInfo) => {\n  // Do something when the cache changes\n});\n")),Object(c.b)("p",null,"The options of the mutation method are used to make configure the query to hit a different API then the one specified in the constructor, and is not needed in most cases."))}u.isMDXComponent=!0},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var i=n(0),r=n.n(i);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},c=Object.keys(e);for(i=0;i<c.length;i++)n=c[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(i=0;i<c.length;i++)n=c[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,c=e.originalType,a=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=u(n),b=i,d=p["".concat(a,".").concat(b)]||p[b]||h[b]||c;return n?r.a.createElement(d,o(o({ref:t},l),{},{components:n})):r.a.createElement(d,o({ref:t},l))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var c=n.length,a=new Array(c);a[0]=b;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,a[1]=o;for(var l=2;l<c;l++)a[l]=n[l];return r.a.createElement.apply(null,a)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);